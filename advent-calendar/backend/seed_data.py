# backend/seed_data.py
from sqlalchemy.orm import Session
from database import SessionLocal, engine, Base
import models.user
import models.door
from models.door import Door

def seed_doors(db: Session):
    """–ó–∞–ø–æ–ª–Ω—è–µ–º –±–∞–∑—É —Ç–µ—Å—Ç–æ–≤—ã–º–∏ –¥–≤–µ—Ä—è–º–∏"""
    
    # –ü—Ä–æ–≤–µ—Ä—è–µ–º, –µ—Å—Ç—å –ª–∏ —É–∂–µ –¥–≤–µ—Ä–∏
    existing_doors = db.query(Door).count()
    if existing_doors > 0:
        print(f"–í –±–∞–∑–µ —É–∂–µ –µ—Å—Ç—å {existing_doors} –¥–≤–µ—Ä–µ–π")
        return

    sample_doors = [
        {
            "day": 1,
            "content_type": "text",
            "content": "–° –î–Ω–µ–º –°–≤—è—Ç–æ–≥–æ –ù–∏–∫–æ–ª–∞—è! üéÖ –¢—ã –ø–æ–ª—É—á–∏–ª –ø–µ—Ä–≤—ã–π –ø–æ–¥–∞—Ä–æ–∫! –°–∫–∏–¥–∫–∞ 10% –Ω–∞ –≤—Å–µ —Ç–æ–≤–∞—Ä—ã –≤ –Ω–∞—à–µ–º –º–∞–≥–∞–∑–∏–Ω–µ.",
            "points": 10
        },
        {
            "day": 2,
            "content_type": "text",
            "content": "–ü–æ–∑–¥—Ä–∞–≤–ª—è–µ–º! üéÅ –¢—ã –≤—ã–∏–≥—Ä–∞–ª –±–µ—Å–ø–ª–∞—Ç–Ω—É—é –¥–æ—Å—Ç–∞–≤–∫—É –¥–æ –∫–æ–Ω—Ü–∞ –≥–æ–¥–∞!",
            "points": 15
        },
        {
            "day": 3,
            "content_type": "link",
            "content": "https://example.com/special-offer",
            "points": 20
        },
        {
            "day": 4,
            "content_type": "text",
            "content": "–°—é—Ä–ø—Ä–∏–∑! üéâ –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ 100 –±–æ–Ω—É—Å–Ω—ã—Ö –±–∞–ª–ª–æ–≤ –Ω–∞ –≤–∞—à —Å—á–µ—Ç!",
            "points": 25
        },
        {
            "day": 5,
            "content_type": "text",
            "content": "–ü—è—Ç–∞—è –¥–≤–µ—Ä—å! üéÑ –°–ø–µ—Ü–∏–∞–ª—å–Ω–æ–µ –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–µ: –≤—Ç–æ—Ä–æ–π —Ç–æ–≤–∞—Ä –≤ –ø–æ–¥–∞—Ä–æ–∫ –ø—Ä–∏ –ø–æ–∫—É–ø–∫–µ!",
            "points": 30
        },
        {
            "day": 6,
            "content_type": "text",
            "content": "–®–µ—Å—Ç–æ–µ –¥–µ–∫–∞–±—Ä—è - –¥–µ–Ω—å —Å–≤—è—Ç–æ–≥–æ –ù–∏–∫–æ–ª–∞—è! üéÖ –ü–æ–ª—É—á–∏—Ç–µ —ç–∫—Å–∫–ª—é–∑–∏–≤–Ω—ã–π –∫—É–ø–æ–Ω –Ω–∞ 25% —Å–∫–∏–¥–∫—É!",
            "points": 35
        },
        {
            "day": 7,
            "content_type": "text",
            "content": "–°–µ–¥—å–º–æ–π –¥–µ–Ω—å —É–¥–∞—á–∏! üçÄ –ë–µ—Å–ø–ª–∞—Ç–Ω—ã–π –ø–æ–¥–∞—Ä–æ–∫ –ø—Ä–∏ —Å–ª–µ–¥—É—é—â–µ–π –ø–æ–∫—É–ø–∫–µ!",
            "points": 40
        },
        {
            "day": 8,
            "content_type": "text",
            "content": "–í–æ—Å—å–º–æ–µ –¥–µ–∫–∞–±—Ä—è! üéâ –°–µ–∫—Ä–µ—Ç–Ω—ã–π –∫–æ–¥: XMAS2024 - –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ –ø—Ä–∏ –æ—Ñ–æ—Ä–º–ª–µ–Ω–∏–∏ –∑–∞–∫–∞–∑–∞!",
            "points": 45
        },
        {
            "day": 9,
            "content_type": "text",
            "content": "–î–µ–≤—è—Ç—ã–π –¥–µ–Ω—å –ø–æ–¥–∞—Ä–∫–æ–≤! üéÑ 15% —Å–∫–∏–¥–∫–∞ –Ω–∞ –≤—Å—é –∫–æ–ª–ª–µ–∫—Ü–∏—é –Ω–æ–≤–æ–≥–æ–¥–Ω–∏—Ö —Ç–æ–≤–∞—Ä–æ–≤!",
            "points": 50
        },
        {
            "day": 10,
            "content_type": "text",
            "content": "–î–µ—Å—è—Ç–æ–µ –¥–µ–∫–∞–±—Ä—è! üéâ –ë–µ—Å–ø–ª–∞—Ç–Ω–∞—è —É–ø–∞–∫–æ–≤–∫–∞ –ø–æ–¥–∞—Ä–∫–∞ –¥–ª—è –≤—Å–µ—Ö –∑–∞–∫–∞–∑–æ–≤!",
            "points": 55
        },
        {
            "day": 11,
            "content_type": "text",
            "content": "–û–¥–∏–Ω–Ω–∞–¥—Ü–∞—Ç—ã–π –¥–µ–Ω—å —Å—é—Ä–ø—Ä–∏–∑–æ–≤! üéÅ –≠–∫—Å–∫–ª—é–∑–∏–≤–Ω—ã–π –¥–æ—Å—Ç—É–ø –∫ —Ä–∞—Å–ø—Ä–æ–¥–∞–∂–µ –¥–æ –ø–æ–ª—É–Ω–æ—á–∏!",
            "points": 60
        },
        {
            "day": 12,
            "content_type": "text",
            "content": "–î–≤–µ–Ω–∞–¥—Ü–∞—Ç—ã–π –¥–µ–Ω—å! üéÖ –°–ø–µ—Ü–∏–∞–ª—å–Ω—ã–π –ø–æ–¥–∞—Ä–æ–∫: –ø–µ—Ä—Å–æ–Ω–∞–ª—å–Ω–∞—è –∫–æ–Ω—Å—É–ª—å—Ç–∞—Ü–∏—è –æ—Ç –Ω–∞—à–µ–≥–æ —ç–∫—Å–ø–µ—Ä—Ç–∞!",
            "points": 65
        },
        {
            "day": 13,
            "content_type": "text",
            "content": "–¢—Ä–∏–Ω–∞–¥—Ü–∞—Ç—ã–π –¥–µ–Ω—å —É–¥–∞—á–∏! üçÄ –î–≤–æ–π–Ω—ã–µ –±–∞–ª–ª—ã –ª–æ—è–ª—å–Ω–æ—Å—Ç–∏ –Ω–∞ –≤—Å–µ –ø–æ–∫—É–ø–∫–∏ —Å–µ–≥–æ–¥–Ω—è!",
            "points": 70
        },
        {
            "day": 14,
            "content_type": "text",
            "content": "–ß–µ—Ç—ã—Ä–Ω–∞–¥—Ü–∞—Ç–æ–µ –¥–µ–∫–∞–±—Ä—è! üéÑ –°–∫–∏–¥–∫–∞ 30% –Ω–∞ –Ω–æ–≤–æ–≥–æ–¥–Ω–∏–µ —É–∫—Ä–∞—à–µ–Ω–∏—è!",
            "points": 75
        },
        {
            "day": 15,
            "content_type": "text",
            "content": "–ü—è—Ç–Ω–∞–¥—Ü–∞—Ç—ã–π –¥–µ–Ω—å –ø–æ–¥–∞—Ä–∫–æ–≤! üéÅ –ë–µ—Å–ø–ª–∞—Ç–Ω—ã–π –ø–æ–¥–∞—Ä–æ–∫ –Ω–∞ –≤—ã–±–æ—Ä –ø—Ä–∏ –∑–∞–∫–∞–∑–µ –æ—Ç 1000 —Ä—É–±–ª–µ–π!",
            "points": 80
        },
        {
            "day": 16,
            "content_type": "text",
            "content": "–®–µ—Å—Ç–Ω–∞–¥—Ü–∞—Ç–æ–µ –¥–µ–∫–∞–±—Ä—è! üéâ –°–µ–∫—Ä–µ—Ç–Ω—ã–π –∫–æ–¥: WINTER2024 - —Å–∫–∏–¥–∫–∞ 20% –Ω–∞ –≤—Å–µ —Ç–æ–≤–∞—Ä—ã!",
            "points": 85
        },
        {
            "day": 17,
            "content_type": "text",
            "content": "–°–µ–º–Ω–∞–¥—Ü–∞—Ç—ã–π –¥–µ–Ω—å —Å—é—Ä–ø—Ä–∏–∑–æ–≤! üéÖ –≠–∫—Å–∫–ª—é–∑–∏–≤–Ω—ã–π –¥–æ—Å—Ç—É–ø –∫ –ø—Ä–µ–¥–∑–∞–∫–∞–∑—É –Ω–æ–≤–∏–Ω–æ–∫!",
            "points": 90
        },
        {
            "day": 18,
            "content_type": "text",
            "content": "–í–æ—Å–µ–º–Ω–∞–¥—Ü–∞—Ç–æ–µ –¥–µ–∫–∞–±—Ä—è! üéÑ –°–ø–µ—Ü–∏–∞–ª—å–Ω–æ–µ –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–µ: –±–µ—Å–ø–ª–∞—Ç–Ω–∞—è –¥–æ—Å—Ç–∞–≤–∫–∞ –≤ –ø–æ–¥–∞—Ä–æ–∫!",
            "points": 95
        },
        {
            "day": 19,
            "content_type": "text",
            "content": "–î–µ–≤—è—Ç–Ω–∞–¥—Ü–∞—Ç—ã–π –¥–µ–Ω—å —É–¥–∞—á–∏! üçÄ –ü–µ—Ä—Å–æ–Ω–∞–ª—å–Ω–∞—è —Å–∫–∏–¥–∫–∞ 15% –Ω–∞ —Å–ª–µ–¥—É—é—â—É—é –ø–æ–∫—É–ø–∫—É!",
            "points": 100
        },
        {
            "day": 20,
            "content_type": "text",
            "content": "–î–≤–∞–¥—Ü–∞—Ç–æ–µ –¥–µ–∫–∞–±—Ä—è! üéÅ –°—é—Ä–ø—Ä–∏–∑: —ç–∫—Å–∫–ª—é–∑–∏–≤–Ω—ã–π –º–µ—Ä—á —Å –ª–æ–≥–æ—Ç–∏–ø–æ–º –Ω–∞—à–µ–≥–æ –º–∞–≥–∞–∑–∏–Ω–∞!",
            "points": 110
        },
        {
            "day": 21,
            "content_type": "text",
            "content": "–î–≤–∞–¥—Ü–∞—Ç—å –ø–µ—Ä–≤—ã–π –¥–µ–Ω—å! üéÖ –ë–µ—Å–ø–ª–∞—Ç–Ω–∞—è –¥–æ—Å—Ç–∞–≤–∫–∞ –∏ —É–ø–∞–∫–æ–≤–∫–∞ –¥–æ –ù–æ–≤–æ–≥–æ –ì–æ–¥–∞!",
            "points": 120
        },
        {
            "day": 22,
            "content_type": "text",
            "content": "–î–≤–∞–¥—Ü–∞—Ç—å –≤—Ç–æ—Ä–æ–π –¥–µ–Ω—å –ø–æ–¥–∞—Ä–∫–æ–≤! üéÑ –°–∫–∏–¥–∫–∞ 25% –Ω–∞ –≤—Å—é –∫–æ–ª–ª–µ–∫—Ü–∏—é!",
            "points": 130
        },
        {
            "day": 23,
            "content_type": "text",
            "content": "–ü—Ä–µ–¥–ø–æ—Å–ª–µ–¥–Ω–∏–π –¥–µ–Ω—å! üéâ –°–µ–∫—Ä–µ—Ç–Ω—ã–π –∫–æ–¥: MERRY2024 - –º–∞–∫—Å–∏–º–∞–ª—å–Ω–∞—è —Å–∫–∏–¥–∫–∞ 40%!",
            "points": 140
        },
        {
            "day": 24,
            "content_type": "text",
            "content": "üéÑ –°–æ—á–µ–ª—å–Ω–∏–∫! üéÖ –ì–ª–∞–≤–Ω—ã–π –ø–æ–¥–∞—Ä–æ–∫: VIP-—Å—Ç–∞—Ç—É—Å –∏ –±–µ—Å–ø–ª–∞—Ç–Ω–∞—è –¥–æ—Å—Ç–∞–≤–∫–∞ –Ω–∞ —Ü–µ–ª—ã–π –≥–æ–¥! –° –ù–æ–≤—ã–º –ì–æ–¥–æ–º!",
            "points": 200
        }
    ]

    doors_added = 0
    for door_data in sample_doors:
        # –ü—Ä–æ–≤–µ—Ä—è–µ–º, —Å—É—â–µ—Å—Ç–≤—É–µ—Ç –ª–∏ —É–∂–µ –¥–≤–µ—Ä—å —Å —Ç–∞–∫–∏–º –¥–Ω–µ–º
        existing_door = db.query(Door).filter(Door.day == door_data["day"]).first()
        if not existing_door:
            door = Door(**door_data)
            db.add(door)
            doors_added += 1
    
    db.commit()
    print(f"–î–æ–±–∞–≤–ª–µ–Ω–æ {doors_added} –Ω–æ–≤—ã—Ö –¥–≤–µ—Ä–µ–π")

def main():
    # –°–æ–∑–¥–∞–µ–º —Ç–∞–±–ª–∏—Ü—ã –ø–µ—Ä–µ–¥ –∑–∞–ø–æ–ª–Ω–µ–Ω–∏–µ–º
    print("–°–æ–∑–¥–∞–µ–º —Ç–∞–±–ª–∏—Ü—ã...")
    Base.metadata.create_all(bind=engine)
    print("–¢–∞–±–ª–∏—Ü—ã —Å–æ–∑–¥–∞–Ω—ã")
    
    db = SessionLocal()
    try:
        seed_doors(db)
    except Exception as e:
        print(f"–û—à–∏–±–∫–∞ –ø—Ä–∏ –∑–∞–ø–æ–ª–Ω–µ–Ω–∏–∏ –±–∞–∑—ã: {e}")
        import traceback
        traceback.print_exc()
    finally:
        db.close()

if __name__ == "__main__":
    main()